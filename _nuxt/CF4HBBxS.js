import{i as je,n as Ke,c as Le,r as we,g as Ge,s as qe,w as se,a as Je,b as G,u as pe,d as ne,e as De,f as Qe,h as et,j as Me,t as L,k as p,m as K,l as ee,o as ye,p as tt,q as ve,v as he,x as nt,y as at,z as lt,A as _e,B as Y,C as te,D as it,E as ot,F as Ce,G as xe,H as st,I as He,J as ct,K as rt,T as ut,L as ke,M as Ie,N as dt,_ as ft,O as vt}from"./BILdiH8x.js";import{g as Ne,r as S,e as ht,i as gt,f as z,h as F,j as Te,k as I,l as Se,m as Ye,n as mt,p as bt,b as T,q as X,s as wt,v as yt,x as _t,y as Tt,z as St,A as Ct,B as xt,C as kt,D as $e,c as ge,w as Be,F as me,o as Q,E as Re,G as It,a as $t,H as Ae}from"./fGEXg0dD.js";import{_ as Bt}from"./DlAUqK2U.js";import"./HMHojlja.js";const Rt="van-hairline",At=`${Rt}--top-bottom`,Pe=5;function Pt(e,{args:n=[],done:i,canceled:o,error:s}){if(e){const t=e.apply(null,n);je(t)?t.then(u=>{u?i():o&&o()}).catch(s||Ke):t?i():o&&o()}else i()}function zt(e,n,i){let o,s=0;const t=e.scrollLeft,u=i===0?1:Math.round(i*1e3/16);let l=t;function c(){Le(o)}function d(){l+=(n-t)/u,e.scrollLeft=l,++s<u&&(o=we(d))}return d(),c}function Ot(e,n,i,o){let s,t=Ge(e);const u=t<n,l=i===0?1:Math.round(i*1e3/16),c=(n-t)/l;function d(){Le(s)}function r(){t+=c,(u&&t>n||!u&&t<n)&&(t=n),qe(e,t),u&&t<n||!u&&t>n?s=we(r):o&&(s=we(o))}return r(),d}let Et=0;function Xe(){const e=Ne(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return`${n}-${++Et}`}const Lt={to:[String,Object],url:String,replace:Boolean};function pt({to:e,url:n,replace:i,$router:o}){e&&o?o[i?"replace":"push"](e):n&&(i?location.replace(n):location.href=n)}function Dt(){const e=S([]),n=[];return ht(()=>{e.value=[]}),[e,o=>(n[o]||(n[o]=s=>{e.value[o]=s}),n[o])]}const Mt=Symbol();function Fe(e){const n=gt(Mt,null);n&&z(n,i=>{i&&e()})}const Ht=se(Je);function Nt(e,n){return e>n?"horizontal":n>e?"vertical":""}function Yt(){const e=S(0),n=S(0),i=S(0),o=S(0),s=S(0),t=S(0),u=S(""),l=S(!0),c=()=>u.value==="vertical",d=()=>u.value==="horizontal",r=()=>{i.value=0,o.value=0,s.value=0,t.value=0,u.value="",l.value=!0};return{move:_=>{const y=_.touches[0];i.value=(y.clientX<0?0:y.clientX)-e.value,o.value=y.clientY-n.value,s.value=Math.abs(i.value),t.value=Math.abs(o.value);const k=10;(!u.value||s.value<k&&t.value<k)&&(u.value=Nt(s.value,t.value)),l.value&&(s.value>Pe||t.value>Pe)&&(l.value=!1)},start:_=>{r(),e.value=_.touches[0].clientX,n.value=_.touches[0].clientY},reset:r,startX:e,startY:n,deltaX:i,deltaY:o,offsetX:s,offsetY:t,direction:u,isVertical:c,isHorizontal:d,isTap:l}}const[We,ie]=G("swipe"),Xt={loop:L,width:p,height:p,vertical:Boolean,autoplay:K(0),duration:K(500),touchable:L,lazyRender:Boolean,initialSwipe:K(0),indicatorColor:String,showIndicators:L,stopPropagation:L},Ve=Symbol(We);var Ft=F({name:We,props:Xt,emits:["change","dragStart","dragEnd"],setup(e,{emit:n,slots:i}){const o=S(),s=S(),t=Te({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let u=!1;const l=Yt(),{children:c,linkChildren:d}=pe(Ve),r=I(()=>c.length),h=I(()=>t[e.vertical?"height":"width"]),g=I(()=>e.vertical?l.deltaY.value:l.deltaX.value),_=I(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-h.value*r.value:0),y=I(()=>h.value?Math.ceil(Math.abs(_.value)/h.value):r.value),k=I(()=>r.value*h.value),b=I(()=>(t.active+r.value)%r.value),M=I(()=>{const f=e.vertical?"vertical":"horizontal";return l.direction.value===f}),m=I(()=>{const f={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+t.offset.toFixed(2)}px)`};if(h.value){const C=e.vertical?"height":"width",x=e.vertical?"width":"height";f[C]=`${k.value}px`,f[x]=e[x]?`${e[x]}px`:""}return f}),W=f=>{const{active:C}=t;return f?e.loop?ve(C+f,-1,r.value):ve(C+f,0,y.value):C},V=(f,C=0)=>{let x=f*h.value;e.loop||(x=Math.min(x,-_.value));let A=C-x;return e.loop||(A=ve(A,_.value,0)),A},B=({pace:f=0,offset:C=0,emitChange:x})=>{if(r.value<=1)return;const{active:A}=t,a=W(f),v=V(a,C);if(e.loop){if(c[0]&&v!==_.value){const w=v<_.value;c[0].setOffset(w?k.value:0)}if(c[r.value-1]&&v!==0){const w=v>0;c[r.value-1].setOffset(w?-k.value:0)}}t.active=a,t.offset=v,x&&a!==A&&n("change",b.value)},D=()=>{t.swiping=!0,t.active<=-1?B({pace:r.value}):t.active>=r.value&&B({pace:-r.value})},H=()=>{D(),l.reset(),ee(()=>{t.swiping=!1,B({pace:-1,emitChange:!0})})},q=()=>{D(),l.reset(),ee(()=>{t.swiping=!1,B({pace:1,emitChange:!0})})};let N;const R=()=>clearTimeout(N),U=()=>{R(),+e.autoplay>0&&r.value>1&&(N=setTimeout(()=>{q(),U()},+e.autoplay))},O=(f=+e.initialSwipe)=>{if(!o.value)return;const C=()=>{var x,A;if(!ye(o)){const a={width:o.value.offsetWidth,height:o.value.offsetHeight};t.rect=a,t.width=+((x=e.width)!=null?x:a.width),t.height=+((A=e.height)!=null?A:a.height)}r.value&&(f=Math.min(r.value-1,f),f===-1&&(f=r.value-1)),t.active=f,t.swiping=!0,t.offset=V(f),c.forEach(a=>{a.setOffset(0)}),U()};ye(o)?X().then(C):C()},Z=()=>O(t.active);let J;const ce=f=>{!e.touchable||f.touches.length>1||(l.start(f),u=!1,J=Date.now(),R(),D())},re=f=>{e.touchable&&t.swiping&&(l.move(f),M.value&&(!e.loop&&(t.active===0&&g.value>0||t.active===r.value-1&&g.value<0)||(tt(f,e.stopPropagation),B({offset:g.value}),u||(n("dragStart",{index:b.value}),u=!0))))},ae=()=>{if(!e.touchable||!t.swiping)return;const f=Date.now()-J,C=g.value/f;if((Math.abs(C)>.25||Math.abs(g.value)>h.value/2)&&M.value){const A=e.vertical?l.offsetY.value:l.offsetX.value;let a=0;e.loop?a=A>0?g.value>0?-1:1:0:a=-Math[g.value>0?"ceil":"floor"](g.value/h.value),B({pace:a,emitChange:!0})}else g.value&&B({pace:0});u=!1,t.swiping=!1,n("dragEnd",{index:b.value}),U()},ue=(f,C={})=>{D(),l.reset(),ee(()=>{let x;e.loop&&f===r.value?x=t.active===0?0:f:x=f%r.value,C.immediate?ee(()=>{t.swiping=!1}):t.swiping=!1,B({pace:x-t.active,emitChange:!0})})},de=(f,C)=>{const x=C===b.value,A=x?{backgroundColor:e.indicatorColor}:void 0;return T("i",{style:A,class:ie("indicator",{active:x})},null)},fe=()=>{if(i.indicator)return i.indicator({active:b.value,total:r.value});if(e.showIndicators&&r.value>1)return T("div",{class:ie("indicators",{vertical:e.vertical})},[Array(r.value).fill("").map(de)])};return ne({prev:H,next:q,state:t,resize:Z,swipeTo:ue}),d({size:h,props:e,count:r,activeIndicator:b}),z(()=>e.initialSwipe,f=>O(+f)),z(r,()=>O(t.active)),z(()=>e.autoplay,U),z([De,Qe,()=>e.width,()=>e.height],Z),z(et(),f=>{f==="visible"?U():R()}),Se(O),Ye(()=>O(t.active)),Fe(()=>O(t.active)),mt(R),bt(R),Me("touchmove",re,{target:s}),()=>{var f;return T("div",{ref:o,class:ie()},[T("div",{ref:s,style:m.value,class:ie("track",{vertical:e.vertical}),onTouchstartPassive:ce,onTouchend:ae,onTouchcancel:ae},[(f=i.default)==null?void 0:f.call(i)]),fe()])}}});const Wt=se(Ft),[Vt,ze]=G("tabs");var Ut=F({name:Vt,props:{count:he(Number),inited:Boolean,animated:Boolean,duration:he(p),swipeable:Boolean,lazyRender:Boolean,currentIndex:he(Number)},emits:["change"],setup(e,{emit:n,slots:i}){const o=S(),s=l=>n("change",l),t=()=>{var l;const c=(l=i.default)==null?void 0:l.call(i);return e.animated||e.swipeable?T(Wt,{ref:o,loop:!1,class:ze("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:s},{default:()=>[c]}):c},u=l=>{const c=o.value;c&&c.state.active!==l&&c.swipeTo(l,{immediate:!e.inited})};return z(()=>e.currentIndex,u),Se(()=>{u(e.currentIndex)}),ne({swipeRef:o}),()=>T("div",{class:ze("content",{animated:e.animated||e.swipeable})},[t()])}});const[Ue,oe]=G("tabs"),Zt={type:_e("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:K(0),duration:K(.3),animated:Boolean,ellipsis:L,swipeable:Boolean,scrollspy:Boolean,offsetTop:K(0),background:String,lazyRender:L,showHeader:L,lineWidth:p,lineHeight:p,beforeChange:Function,swipeThreshold:K(5),titleActiveColor:String,titleInactiveColor:String},Ze=Symbol(Ue);var jt=F({name:Ue,props:Zt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:n,slots:i}){let o,s,t,u,l;const c=S(),d=S(),r=S(),h=S(),g=Xe(),_=nt(c),[y,k]=Dt(),{children:b,linkChildren:M}=pe(Ze),m=Te({inited:!1,position:"",lineStyle:{},currentIndex:-1}),W=I(()=>b.length>+e.swipeThreshold||!e.ellipsis||e.shrink),V=I(()=>({borderColor:e.color,background:e.background})),B=(a,v)=>{var w;return(w=a.name)!=null?w:v},D=I(()=>{const a=b[m.currentIndex];if(a)return B(a,m.currentIndex)}),H=I(()=>it(e.offsetTop)),q=I(()=>e.sticky?H.value+o:0),N=a=>{const v=d.value,w=y.value;if(!W.value||!v||!w||!w[m.currentIndex])return;const P=w[m.currentIndex].$el,$=P.offsetLeft-(v.offsetWidth-P.offsetWidth)/2;u&&u(),u=zt(v,$,a?0:+e.duration)},R=()=>{const a=m.inited;X(()=>{const v=y.value;if(!v||!v[m.currentIndex]||e.type!=="line"||ye(c.value))return;const w=v[m.currentIndex].$el,{lineWidth:P,lineHeight:$}=e,E=w.offsetLeft+w.offsetWidth/2,j={width:Y(P),backgroundColor:e.color,transform:`translateX(${E}px) translateX(-50%)`};if(a&&(j.transitionDuration=`${e.duration}s`),te($)){const le=Y($);j.height=le,j.borderRadius=le}m.lineStyle=j})},U=a=>{const v=a<m.currentIndex?-1:1;for(;a>=0&&a<b.length;){if(!b[a].disabled)return a;a+=v}},O=(a,v)=>{const w=U(a);if(!te(w))return;const P=b[w],$=B(P,w),E=m.currentIndex!==null;m.currentIndex!==w&&(m.currentIndex=w,v||N(),R()),$!==e.active&&(n("update:active",$),E&&n("change",$,P.title)),t&&!e.scrollspy&&ot(Math.ceil(Ce(c.value)-H.value))},Z=(a,v)=>{const w=b.find(($,E)=>B($,E)===a),P=w?b.indexOf(w):0;O(P,v)},J=(a=!1)=>{if(e.scrollspy){const v=b[m.currentIndex].$el;if(v&&_.value){const w=Ce(v,_.value)-q.value;s=!0,l&&l(),l=Ot(_.value,w,a?0:+e.duration,()=>{s=!1})}}},ce=(a,v,w)=>{const{title:P,disabled:$}=b[v],E=B(b[v],v);$||(Pt(e.beforeChange,{args:[E],done:()=>{O(v),J()}}),pt(a)),n("clickTab",{name:E,title:P,event:w,disabled:$})},re=a=>{t=a.isFixed,n("scroll",a)},ae=a=>{X(()=>{Z(a),J(!0)})},ue=()=>{for(let a=0;a<b.length;a++){const{top:v}=xe(b[a].$el);if(v>q.value)return a===0?0:a-1}return b.length-1},de=()=>{if(e.scrollspy&&!s){const a=ue();O(a)}},fe=()=>{if(e.type==="line"&&b.length)return T("div",{class:oe("line"),style:m.lineStyle},null)},f=()=>{var a,v,w;const{type:P,border:$,sticky:E}=e,j=[T("div",{ref:E?void 0:r,class:[oe("wrap"),{[At]:P==="line"&&$}]},[T("div",{ref:d,role:"tablist",class:oe("nav",[P,{shrink:e.shrink,complete:W.value}]),style:V.value,"aria-orientation":"horizontal"},[(a=i["nav-left"])==null?void 0:a.call(i),b.map(le=>le.renderTitle(ce)),fe(),(v=i["nav-right"])==null?void 0:v.call(i)])]),(w=i["nav-bottom"])==null?void 0:w.call(i)];return E?T("div",{ref:r},[j]):j},C=()=>{R(),X(()=>{var a,v;N(!0),(v=(a=h.value)==null?void 0:a.swipeRef.value)==null||v.resize()})};z(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],R),z(De,C),z(()=>e.active,a=>{a!==D.value&&Z(a)}),z(()=>b.length,()=>{m.inited&&(Z(e.active),R(),X(()=>{N(!0)}))});const x=()=>{Z(e.active,!0),X(()=>{m.inited=!0,r.value&&(o=xe(r.value).height),N(!0)})},A=(a,v)=>n("rendered",a,v);return ne({resize:C,scrollTo:ae}),Ye(R),Fe(R),at(x),lt(c,R),Me("scroll",de,{target:_,passive:!0}),M({id:g,props:e,setLine:R,scrollable:W,onRendered:A,currentName:D,setTitleRefs:k,scrollIntoView:N}),()=>T("div",{ref:c,class:oe([e.type])},[e.showHeader?e.sticky?T(Ht,{container:c.value,offsetTop:H.value,onScroll:re},{default:()=>[f()]}):f():null,T(Ut,{ref:h,count:b.length,inited:m.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:m.currentIndex,onChange:O},{default:()=>{var a;return[(a=i.default)==null?void 0:a.call(i)]}})])}});const[Kt,Oe]=G("badge"),Gt={dot:Boolean,max:p,tag:_e("div"),color:String,offset:Array,content:p,showZero:L,position:_e("top-right")};var qt=F({name:Kt,props:Gt,setup(e,{slots:n}){const i=()=>{if(n.content)return!0;const{content:l,showZero:c}=e;return te(l)&&l!==""&&(c||l!==0&&l!=="0")},o=()=>{const{dot:l,max:c,content:d}=e;if(!l&&i())return n.content?n.content():te(c)&&st(d)&&+d>+c?`${c}+`:d},s=l=>l.startsWith("-")?l.replace("-",""):`-${l}`,t=I(()=>{const l={background:e.color};if(e.offset){const[c,d]=e.offset,{position:r}=e,[h,g]=r.split("-");n.default?(typeof d=="number"?l[h]=Y(h==="top"?d:-d):l[h]=h==="top"?Y(d):s(d),typeof c=="number"?l[g]=Y(g==="left"?c:-c):l[g]=g==="left"?Y(c):s(c)):(l.marginTop=Y(d),l.marginLeft=Y(c))}return l}),u=()=>{if(i()||e.dot)return T("div",{class:Oe([e.position,{dot:e.dot,fixed:!!n.default}]),style:t.value},[o()])};return()=>{if(n.default){const{tag:l}=e;return T(l,{class:Oe("wrapper")},{default:()=>[n.default(),u()]})}return u()}}});const Jt=se(qt),[Qt,Ee]=G("tab"),en=F({name:Qt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:p,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:L},setup(e,{slots:n}){const i=I(()=>{const s={},{type:t,color:u,disabled:l,isActive:c,activeColor:d,inactiveColor:r}=e;u&&t==="card"&&(s.borderColor=u,l||(c?s.backgroundColor=u:s.color=u));const g=c?d:r;return g&&(s.color=g),s}),o=()=>{const s=T("span",{class:Ee("text",{ellipsis:!e.scrollable})},[n.title?n.title():e.title]);return e.dot||te(e.badge)&&e.badge!==""?T(Jt,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[s]}):s};return()=>T("div",{id:e.id,role:"tab",class:[Ee([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[o()])}}),[tn,nn]=G("swipe-item");var an=F({name:tn,setup(e,{slots:n}){let i;const o=Te({offset:0,inited:!1,mounted:!1}),{parent:s,index:t}=He(Ve);if(!s)return;const u=I(()=>{const d={},{vertical:r}=s.props;return s.size.value&&(d[r?"height":"width"]=`${s.size.value}px`),o.offset&&(d.transform=`translate${r?"Y":"X"}(${o.offset}px)`),d}),l=I(()=>{const{loop:d,lazyRender:r}=s.props;if(!r||i)return!0;if(!o.mounted)return!1;const h=s.activeIndicator.value,g=s.count.value-1,_=h===0&&d?g:h-1,y=h===g&&d?0:h+1;return i=t.value===h||t.value===_||t.value===y,i}),c=d=>{o.offset=d};return Se(()=>{X(()=>{o.mounted=!0})}),ne({setOffset:c}),()=>{var d;return T("div",{class:nn(),style:u.value},[l.value?(d=n.default)==null?void 0:d.call(n):null])}}});const ln=se(an),[on,be]=G("tab"),sn=ct({},Lt,{dot:Boolean,name:p,badge:p,title:String,disabled:Boolean,titleClass:rt,titleStyle:[String,Object],showZeroBadge:L});var cn=F({name:on,props:sn,setup(e,{slots:n}){const i=Xe(),o=S(!1),s=Ne(),{parent:t,index:u}=He(Ze);if(!t)return;const l=()=>{var y;return(y=e.name)!=null?y:u.value},c=()=>{o.value=!0,t.props.lazyRender&&X(()=>{t.onRendered(l(),e.title)})},d=I(()=>{const y=l()===t.currentName.value;return y&&!o.value&&c(),y}),r=S(""),h=S("");wt(()=>{const{titleClass:y,titleStyle:k}=e;r.value=y?yt(y):"",h.value=k&&typeof k!="string"?_t(Tt(k)):k});const g=y=>T(en,xt({key:i,id:`${t.id}-${u.value}`,ref:t.setTitleRefs(u.value),style:h.value,class:r.value,isActive:d.value,controls:i,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:k=>y(s.proxy,u.value,k)},ke(t.props,["type","color","shrink"]),ke(e,["dot","badge","title","disabled","showZeroBadge"])),{title:n.title}),_=S(!d.value);return z(d,y=>{y?_.value=!1:ee(()=>{_.value=!0})}),z(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),St(ut,d),ne({id:i,renderTitle:g}),()=>{var y;const k=`${t.id}-${u.value}`,{animated:b,swipeable:M,scrollspy:m,lazyRender:W}=t.props;if(!n.default&&!b)return;const V=m||d.value;if(b||M)return T(ln,{id:i,role:"tabpanel",class:be("panel-wrapper",{inactive:_.value}),tabindex:d.value?0:-1,"aria-hidden":!d.value,"aria-labelledby":k},{default:()=>{var H;return[T("div",{class:be("panel")},[(H=n.default)==null?void 0:H.call(n)])]}});const D=o.value||m||!W?(y=n.default)==null?void 0:y.call(n):null;return Ct(T("div",{id:i,role:"tabpanel",class:be("panel"),tabindex:V?0:-1,"aria-labelledby":k},[D]),[[kt,V]])}}});const rn={class:"video-list"},un=F({__name:"index",async setup(e){let n,i;const{data:o}=([n,i]=$e(()=>Ie("/api/channel","$OF2VfZTw5z")),n=await n,i(),n),{data:s}=([n,i]=$e(()=>Ie("/api/video","$nH7OQjAUUu")),n=await n,i(),n),t=S([]),u=S(!1),l=S(!1);let c=1,d=10;const r=()=>{var g,_;u.value=!1;const h=(g=s.value)==null?void 0:g.slice((c-1)*d,c*d);t.value.push(...h),c++,((_=s.value)==null?void 0:_.length)===t.value.length&&(l.value=!0)};return r(),(h,g)=>{const _=ft,y=cn,k=jt,b=vt,M=dt;return Q(),ge(me,null,[T(_),T(k,null,{default:Be(()=>[(Q(!0),ge(me,null,Re(It(o),m=>(Q(),Ae(y,{key:m.id,title:m.name},null,8,["title"]))),128))]),_:1}),T(M,{loading:u.value,"onUpdate:loading":g[0]||(g[0]=m=>u.value=m),finished:l.value,"finished-text":"去bilibili App看更多",onLoad:r},{default:Be(()=>[$t("div",rn,[(Q(!0),ge(me,null,Re(t.value,m=>(Q(),Ae(b,{key:m.aid,item:m},null,8,["item"]))),128))])]),_:1},8,["loading","finished"])],64)}}}),gn=Bt(un,[["__scopeId","data-v-05881654"]]);export{gn as default};
